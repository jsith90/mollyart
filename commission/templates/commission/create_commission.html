{% extends 'base.html' %}
{% load static %}

{% block title %}Molly ST – Commissions{% endblock %}

{% block content %}
    <header class="commission-header">
        <div class="header-div">
            <div class="header-icons">
                <div class="header-icon">
                    <img src="{% static 'images/blue-tree.png' %}">
                </div>
                <a class="commission-heading" href="{% url 'create_commission' %}"><img src="{% static 'images/commission-logo.png' %}"></a>
                <div class="header-icon">
                    <img src="{% static 'images/blue-tree.png' %}">
                </div>
            </div>
        </div>
    </header><div class="svg-wave-under">
        <svg viewBox="0 0 1903 118" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style>svg {display: inline-block; animation: dl-wave 15s linear infinite;
        transform-origin: top;}</style><path fill="rgba(231, 229, 213, 1)" d="M 0 40 C 288.59999999999997 40 192.40000000000003 89 481 89 L 481 89 L 481 0 L 0 0 Z" stroke-width="0"></path> <path fill="rgba(231, 229, 213, 1)" d="M 480 89 C 742.8 89 655.2 21 918 21 L 918 21 L 918 0 L 480 0 Z" stroke-width="0"></path> <path fill="rgba(231, 229, 213, 1)" d="M 917 21 C 1267.4 21 1150.6 97 1501 97 L 1501 97 L 1501 0 L 917 0 Z" stroke-width="0"></path><path fill="rgba(231, 229, 213, 1)" d="M 1500 97 C 1741.8 97 1661.2 40 1903 40 L 1903 40 L 1903 0 L 1500 0 Z" stroke-width="0"></path></svg><svg viewBox="0 0 1903 118" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style>svg {animation: dl-wave 15s linear infinite;
        transform-origin: top;}</style><path fill="rgba(231, 229, 213, 1)" d="M 0 40 C 288.59999999999997 40 192.40000000000003 89 481 89 L 481 89 L 481 0 L 0 0 Z" stroke-width="0"></path> <path fill="rgba(231, 229, 213, 1)" d="M 480 89 C 742.8 89 655.2 21 918 21 L 918 21 L 918 0 L 480 0 Z" stroke-width="0"></path> <path fill="rgba(231, 229, 213, 1)" d="M 917 21 C 1267.4 21 1150.6 97 1501 97 L 1501 97 L 1501 0 L 917 0 Z" stroke-width="0"></path><path fill="rgba(231, 229, 213, 1)" d="M 1500 97 C 1741.8 97 1661.2 40 1903 40 L 1903 40 L 1903 0 L 1500 0 Z" stroke-width="0"></path></svg>
    </div>
    <div class="commission-intro">
        <div class="commission-intro-image"><img src="{% static 'images/commission-image-fit.JPG' %}"></div>
        <div class="commission-intro-paragraph"><h1>Bring your ideas to life...</h1><p>with a bespoke piece of art for you and your loved ones that will last forever and be of high quality. I work hard to make each commission unique and reflect your character and immortalise/capture your favourite memories, adventures, animals and more! I look forward to hearing from you and creating something special for you.</p></div>
    </div>
    <div class="svg-wave-over"><svg viewBox="0 0 1903 118" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style>svg {transform: scale(1, -1); display: inline-block; animation: dl-wave 15s linear infinite;
    transform-origin: top;}</style><path fill="rgba(231, 229, 213, 1)" d="M 0 40 C 288.59999999999997 40 192.40000000000003 89 481 89 L 481 89 L 481 0 L 0 0 Z" stroke-width="0"></path> <path fill="rgba(231, 229, 213, 1)" d="M 480 89 C 742.8 89 655.2 21 918 21 L 918 21 L 918 0 L 480 0 Z" stroke-width="0"></path> <path fill="rgba(231, 229, 213, 1)" d="M 917 21 C 1267.4 21 1150.6 97 1501 97 L 1501 97 L 1501 0 L 917 0 Z" stroke-width="0"></path><path fill="rgba(231, 229, 213, 1)" d="M 1500 97 C 1741.8 97 1661.2 40 1903 40 L 1903 40 L 1903 0 L 1500 0 Z" stroke-width="0"></path></svg><svg viewBox="0 0 1903 118" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style>svg {transform: scale(1, -1); display: inline-block; animation: dl-wave 15s linear infinite; transform-origin: top;}</style><path fill="rgba(231, 229, 213, 1)" d="M 0 40 C 288.59999999999997 40 192.40000000000003 89 481 89 L 481 89 L 481 0 L 0 0 Z" stroke-width="0"></path> <path fill="rgba(231, 229, 213, 1)" d="M 480 89 C 742.8 89 655.2 21 918 21 L 918 21 L 918 0 L 480 0 Z" stroke-width="0"></path> <path fill="rgba(231, 229, 213, 1)" d="M 917 21 C 1267.4 21 1150.6 97 1501 97 L 1501 97 L 1501 0 L 917 0 Z" stroke-width="0"></path><path fill="rgba(231, 229, 213, 1)" d="M 1500 97 C 1741.8 97 1661.2 40 1903 40 L 1903 40 L 1903 0 L 1500 0 Z" stroke-width="0"></path></svg>
    </div><div class="slide-padding">
        <div class="slideshow">
            {% for review in reviews %}
                <div class="slide">
                    <p class="slide-paragraph">“{{ review.review }}”</p>
                    <p class="slide-paragraph">{{ review.name }}</p>
                </div>
            {% endfor %}
            <div class="backdrop">
                <img src="{% static 'images/molly-boot.png' %}">
            </div>
        </div>
    </div>
    <section class="form-section form-display"> 
        <div class="commission-example">
            <div class="repeat-image">
                <img class="relative" src="{% static 'images/commission-example-min.JPG' %}">
            </div>
            <h2 class="form-toggle">Commission Form</h2>
        </div>
        <form class="commission-form" method="post" enctype="multipart/form-data">
        {% csrf_token %}
            <div class="form">
                <label for="{{ commission_form.name.id_for_label }}">{{ commission_form.name.label }}</label>
                {{ commission_form.name }}
            </div>
            <div class="form">
                <label for="{{ commission_form.email.id_for_label }}">{{ commission_form.email.label }}</label>
                {{ commission_form.email }}
            </div>  
            <div class="form">
                <label for="{{ commission_form.address.id_for_label }}">{{ commission_form.address.label }}</label>
                {{ commission_form.address }}
            </div>
            <div class="form">
                <label for="{{ commission_form.commission_title.id_for_label }}">{{ commission_form.commission_title.label }}</label>
                {{ commission_form.commission_title }}
            </div>
            <div class="form">
                <label for="{{ commission_form.commission_idea.id_for_label }}">{{ commission_form.commission_idea.label }}</label>
                {{ commission_form.commission_idea }}
            </div>
            <div class="form">
                <label for="{{ commission_form.canvas_size.id_for_label }}">{{ commission_form.canvas_size.label }}</label>
                {{ commission_form.canvas_size }}
            </div>
            <div class="form">
                <label for="{{ commission_form.deadline_date.id_for_label }}">{{ commission_form.deadline_date.label }}</label>
                {{ commission_form.deadline_date }}
            </div>
            <div class="form">
                <label for="{{ commission_form.contact_number.id_for_label }}">{{ commission_form.contact_number.label }}</label>
                {{ commission_form.contact_number }}
            </div>
            <div class="form">
                <label for="{{ commission_form.framing_options.id_for_label }}">{{ commission_form.framing_options.label }}</label>
                {{ commission_form.framing_options }}
            </div>
            <div class="add-commission-images">
                <p>It helps speed things up if you can also send some images for me to reference - please attach below</p>
                {{ image_formset.management_form }}
                {% for form in image_formset %}
                    <div class="form image-input-display" id="edit_{{ form.image.id_for_label }}">
                        <label for="{{ form.image.id_for_label }}">{{ form.image.label }}</label>
                        {{ form.image }}
                    </div>
                {% endfor %}
                <div class="add-buttons">
                    <label for="add-img">Press for image input:</label>
                    <div class="just-buttons">
                        <button type="button" class="open-image-input" id="add-img">+</button>
                        <button type="button" class="close-image-input" id="minus-img">-</button>
                    </div>
                </div>
            </div>
            <button type="submit" class="commission-button">Send Commission</button>
        </form>
    </section>
    <section class="past-commission-slides">
        <div class="reel-images">
            <div class="reel-image">
                {% for image in past_images %}
                    <img class="modal-img" src="{{ image.image.url }}" alt="{{ image.image_name }}">
                {% endfor %}
            </div>
            <div class="reel-image">
                {% for image in past_images %}
                    <img class="modal-img" src="{{ image.image.url }}" alt="{{ image.image_name }}">
                {% endfor %}
            </div>
        </div>
    </section>
    <!-- <section class="commission-section">
        <div class="reel-images">
            <div class="reel-image">
                <p>
                    {% for review in reviews %}
                        <span class="review-span">"{{ review.review }}"</span>  <span class="review-name">{{ review.name }}</span>
                    {% endfor %}
                </p>
            </div>
            <div class="reel-image">
                <p>
                    {% for review in reviews %}
                        <span class="review-span">"{{ review.review }}"  </span><span class="review-name">{{ review.name }}</span>
                    {% endfor %}
                </p>
            </div>
        </div>
        <div class="commission-backdrop">
        </div>
        <div class="commission-image">
            <img src="{% static 'images/commission-image.JPG' %}">
        </div>
    </section> -->
    <!-- The Modal -->
    <div id="myModal" class="modal">
      <span class="close">&times;</span>
      <img class="modal-content" id="img01">
      
      <!-- Next and previous buttons -->
      <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
      <a class="next" onclick="plusSlides(1)">&#10095;</a>

      <div class="thumbnails row">
        {% for image in past_images %}
          <div class="column">
            <img class="demo cursor" src="{{ image.image.url }}" style="width:100%" onclick="currentSlide({{ forloop.counter }})" alt="{{ image.image_name }}">
          </div>
        {% endfor %}
      </div>
    </div>
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function() {
            // Get all image input divs
            const imageInputs = document.querySelectorAll(".image-input-display");

            // Hide all image inputs initially
            imageInputs.forEach(input => input.style.display = "none");

            // Get the button to show more image inputs
            const openButton = document.querySelector(".open-image-input");

            // Get the button to hide image inputs
            const closeButton = document.querySelector(".close-image-input");

            // Initialize a counter to keep track of the current image input to display
            let currentImageIndex = 0;

            // Show image input on button click
            openButton.addEventListener('click', function() {
                if (currentImageIndex < imageInputs.length) {
                    imageInputs[currentImageIndex].style.display = "block";
                    currentImageIndex++;
                }
            });

            // Hide image input on button click
            closeButton.addEventListener('click', function() {
                if (currentImageIndex > 0) {
                    currentImageIndex--;
                    imageInputs[currentImageIndex].style.display = "none";
                }
            });
        });
    </script>
{% endblock %}
